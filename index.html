<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sapang Maragul Integrated School</title>
<style>
:root{
 --primary:#22c55e; /* Green */
 --secondary:#ef4444; /* Red */
 --accent:#3b82f6; /* Blue */
 --yellow:#eab308; /* Yellow */
 --bg:#e0f2fe; /* Light blue background similar to news tab */
 --card:#dcfce7;
 --text:#2c4233;
 --muted:#86efac;
 --grad:linear-gradient(135deg,#22c55e,#ef4444,#3b82f6,#eab308);
}
*{box-sizing:border-box}
body{
 margin:0;
 font-family:'Inter','Segoe UI',Arial,sans-serif;
 color:var(--text);
 background:var(--bg);
 line-height:1.7
}

/* Main Header Container */
header {
  position: relative;
  width: 100%;
  height: calc(50vw); /* 2:1 aspect ratio base */
  max-height: 90vh;
  min-height: 250px;
  overflow: hidden;
  display: none; /* Hide by default */
}

header.home-visible {
  display: block; /* Show when home tab is active */
}

/* Modern aspect-ratio fallback */
@supports (aspect-ratio: 2/1) {
  header {
    height: auto;
    aspect-ratio: 2/1;
  }
}

/* Header Slider Images */
.header-slide {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: opacity 1.5s;
  will-change: opacity;
  backface-visibility: hidden;
}

.header-slide.active {
  opacity: 1;
}

/* Content Overlay */
.header-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,.4);
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 20px;
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

/* Mobile Optimization */
@media (max-width: 768px) {
  header {
    min-height: 200px;
    height: calc(50vw); /* Maintain 2:1 aspect ratio */
  }

  .floating-logo {
    width: 50px;
    top: 10px;
    left: 10px;
  }

  .header-overlay {
    padding: 15px;
  }
}

/* Arrow Buttons */
.arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #333;
  font-size: 30px;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: 50%;
  transition: background 0.3s;
  z-index: 10;
}

.arrow:hover {
  background: rgba(255, 255, 255, 0.8);
}

.left-arrow {
  left: 20px;
}

.right-arrow {
  right: 20px;
}

.dots {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
}

.tabs{display:flex;flex-wrap:wrap;justify-content:center;position:sticky;top:0;z-index:10;transition:.4s;height:64px}
.tabs.glass{background:rgba(255,255,255,.6);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,0.2)}
.tabs.hide{transform:translateY(-100%)}
.nav-logo{
  height:60px;
  margin-right:20px;
  vertical-align:middle;
}

.school-name{
  font-weight:bold;
  font-size:18px;
  background: var(--grad);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  margin-right:20px;
}

.tabs{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}
.tab-button{background:none;border:none;backdrop-filter:none;padding:14px 22px;font-weight:600;font-size:15px;cursor:pointer;position:relative;color:#333;transition:color .3s ease;height:56px;font-family:'Roboto',sans-serif;}
.tab-button::after{content:"";position:absolute;left:20%;bottom:6px;width:60%;height:3px;background:linear-gradient(135deg,#6a11cb,#2575fc);border-radius:6px;transform:scaleX(0);transition:transform .3s ease}
.tab-button:hover{color:#6a11cb}
.tab-button.active{color:#6a11cb}
.tab-button.active::after{transform:scaleX(1)}

.tab-content{display:none;padding:60px 10%;animation:fade .6s}
.tab-content.active{display:block}
#comments{background-color:#dcfce7}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}

.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px;margin-top:30px}
.card{background:#fff;padding:25px;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,.1)}

.star{cursor:pointer;color:#ddd}
.star:hover, .star.active{color:#f59e0b}

.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:30px;text-align:center}
.stat span{font-size:42px;font-weight:bold;color:#6a11cb}

.bottom-slider img{width:100%;display:none}
.bottom-slider img.active{display:block}

.reveal{opacity:0;transform:translateY(30px);transition:.7s}
.reveal.active{opacity:1;transform:none}

.mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid #ddd;justify-content:space-around;padding:10px 0;z-index:20}
.mobile-nav button{background:rgba(255,255,255,.6);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,0.2);font-size:14px;height:44px;font-family:'Roboto',sans-serif;}
@media(max-width:768px){.tabs{display:none;height:48px}.mobile-nav{display:flex}.tab-content{padding:30px 6%}}

footer{

 background:#0f172a;
 color:#e5e7eb;
 padding:40px 16px;
 text-align:center;
 font-size:14px
}

footer.footer-hidden {
  display: none;
}


/* SECTION SEPARATOR */
.section-sep{height:1px;background:linear-gradient(90deg,transparent,#c7d2fe,transparent);margin:60px 0}

/* VISION MISSION CORE VALUES STYLES */
.vision-mission-section {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}
.vision-mission-item {
  margin-bottom: 40px;
}
.vision-mission-title {
  font-size: 2em;
  font-weight: bold;
  background: var(--grad);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  text-align: center;
  margin: 40px 0;
  font-family: Arial, sans-serif;
}
.vision-mission-sub {
  font-size: 1.2em;
  font-weight: bold;
  background: var(--grad);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  text-align: center;
  margin: 20px 0 10px 0;
  font-family: Arial, sans-serif;
}
.vision-mission-p {
  text-align: center;
  line-height: 1.8;
  color: #666;
  max-width: 600px;
  margin: 0 auto;
  font-family: Arial, sans-serif;
}

/* DROPDOWN MENU */
.dropdown{position:relative;display:inline-block}
.dropdown-menu{display:none;position:absolute;top:100%;left:0;background:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);min-width:150px;z-index:1000;padding:8px 0}
.dropdown:hover .dropdown-menu{display:block}
.dropdown-menu .tab-button{background:none;border:none;padding:10px 20px;width:100%;text-align:left;color:#333;font-weight:500;font-size:14px;cursor:pointer;transition:background .2s}
.dropdown-menu .tab-button:hover{background:#f0f0f0;color:var(--primary)}
.dropdown-menu .tab-button.active{background:#e0e0e0;color:var(--primary)}

/* NEWS TAB STYLES */
#news {
  background-color: #e0f2fe; /* light blue */
}
.news-item {
  display: flex;
  gap: 30px;
  align-items: center;
  margin-bottom: 40px;
}
.news-item.center-bottom {
  flex-direction: column;
  text-align: center;
}
.news-item img {
  height: auto;
  object-fit: cover;
  border-radius: 10px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  flex-shrink: 0;
}
.news-item .content {
  flex: 1;
}
.news-item.center-bottom .content {
  text-align: center;
}
.news-item h3 {
  font-size: 1.8em;
  font-weight: bold;
  color: #800000; /* maroon */
  margin: 0 0 5px 0;
}
.news-item .date {
  font-style: italic;
  color: #666;
  font-size: 0.9em;
  margin-bottom: 15px;
}
.news-item p {
  margin-bottom: 10px;
  line-height: 1.6;
}
.news-item .hashtags {
  margin-top: 20px;
  font-weight: bold;
  color: #333;
}
.news-item .credit {
  margin-top: 10px;
  font-size: 0.8em;
  color: #999;
  text-align: right;
}
@media (max-width: 768px) {
  .news-item {
    flex-direction: column;
  }
  .news-item img {
    width: 100% !important;
    height: 200px;
  }
}

</style>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
</head>
<body>

<!-- Navigation bar at the top with school logo -->
<div class="tabs glass" id="tabs">
<img src="C:\Users\Admin\Pictures\bg-f6c57c24-c584-4bac-9b50-a7f76b112ebd.png" class="nav-logo">
<span class="school-name">Sapang Maragul Integrated School</span>

<button class="tab-button active" data-tab="home">Home</button>
<button class="tab-button" data-tab="hymn">Hymn</button>
<button class="tab-button" data-tab="partnerships">Partnerships</button>
<button class="tab-button" data-tab="faculty">Faculty</button>
<button class="tab-button" data-tab="comments" style="display: none;">Comments</button>
<div class="dropdown">
  <button class="tab-button dropdown-toggle">About More</button>
  <div class="dropdown-menu">
    <button class="tab-button submenu" data-tab="admission">Admission</button>
    <button class="tab-button submenu" data-tab="news">News</button>
  </div>
</div>
</div>

<!-- Header section below the navigation bar -->
<header id="main-header">

<img src="C:\Users\Admin\Pictures\1.png" class="header-slide active">
<img src="C:\Users\Admin\Pictures\2.png" class="header-slide">
<img src="EMPTY" class="header-slide">
<div class="header-overlay">
</div>
<div class="dots"></div>
<button class="arrow left-arrow" onclick="prevSlide()">&#10094;</button>
<button class="arrow right-arrow" onclick="nextSlide()">&#10095;</button>
</header>

<!-- NOTE: The following sections are intentionally LIMITED to HOME TAB ONLY:
- Principal's Message
- School at a Glance
- Recommended Highlights
- Campus Life
- Statistics
They do NOT exist outside #home to prevent bleed into other tabs -->

<!-- ================= HOME TAB ================= -->
<div id="home" class="tab-content active">

<!-- HERO / WELCOME -->
<section class="card" style="margin-bottom:40px;text-align:center">
  <h2>Welcome to Sapang Maragul Integrated School</h2>
  <p>A nurturing, inclusive, and future-ready learning community under the Department of Education.</p>
</section>

<!-- PRINCIPAL'S MESSAGE (HOME ONLY) -->
<h3>Principal's Message</h3>
<div class="card" style="display:flex;gap:25px;align-items:flex-start;flex-wrap:wrap">
  <img src="C:\Users\Admin\Pictures\596806551_3780117582121849_2609427703298728935_n.jpg" alt="School Principal" style="width:220px;border-radius:20px;box-shadow:0 8px 20px rgba(0,0,0,.15)">
  <div style="flex:1;min-width:260px">
    <p>Welcome to Sapang Maragul Integrated School. Our institution is committed to nurturing learners who are academically competent, values-oriented, and ready to face future challenges.</p>
    <p>Through strong leadership, dedicated teachers, and the support of our community, we continue to strengthen our programs and services for the holistic development of every learner.</p>
    <p><strong>‚Äî MA. HEIDI F. ADI</strong><br>
       <em>School Principal</em></p>
  </div>
</div>

<!-- VISION, MISSION & CORE VALUES -->
<h2 class="vision-mission-title">DepEd Mission, Vision, Core Values and Mandate</h2>
<div class="vision-mission-section">
  <div class="vision-mission-item">
    <h3 class="vision-mission-sub">Mission</h3>
    <p class="vision-mission-p">To protect and promote the right of every Filipino to quality, equitable, culture-based, and complete basic education where:<br><br>
    Students learn in a child-friendly, gender-sensitive, safe, and motivating environment.<br>
    Teachers facilitate learning and constantly nurture every learner.<br>
    Administrators and staff, as stewards of the institution, ensure an enabling and supportive environment for effective learning to happen.<br>
    Family, community, and other stakeholders are actively engaged and share responsibility for developing life-long learners.</p>
  </div>
  <div class="vision-mission-item">
    <h3 class="vision-mission-sub">Vision</h3>
    <p class="vision-mission-p">We dream of Filipinos<br>
    who passionately love their country<br>
    and whose values and competencies<br>
    enable them to realize their full potential<br>
    and contribute meaningfully to building the nation.<br><br>
    As a learner-centered public institution,<br>
    the Department of Education<br>
    continuously improves itself<br>
    to better serve its stakeholders.</p>
  </div>
  <div class="vision-mission-item">
    <h3 class="vision-mission-sub">Core Values</h3>
    <p class="vision-mission-p">Maka-Diyos,<br>
    Maka-tao,<br>
    Makakalikasan,<br>
    Makabansa</p>
  </div>
  <div class="vision-mission-item">
    <h3 class="vision-mission-sub">Mandate</h3>
    <p class="vision-mission-p">The Department of Education was established through the Education Decree of 1863 as the Superior Commission of Primary Instruction under a Chairman. The Education agency underwent many reorganization efforts in the 20th century in order to better define its purpose vis a vis the changing administrations and charters. The present day Department of Education was eventually mandated through Republic Act 9155, otherwise known as the Governance of Basic Education act of 2001 which establishes the mandate of this agency.

The Department of Education (DepEd) formulates, implements, and coordinates policies, plans, programs and projects in the areas of formal and non-formal basic education. It supervises all elementary and secondary education institutions, including alternative learning systems, both public and private; and provides for the establishment and maintenance of a complete, adequate, and integrated system of basic education relevant to the goals of national development.</p>
  </div>
</div>

<hr style="border:none;height:1px;background:#e5e7eb;margin:60px 0">
<h3 style="margin-top:0">School at a Glance</h3>
<div class="stats">
  <div class="stat"><span data-target="1200">0</span><p>Students</p></div>
  <div class="stat"><span data-target="55">0</span><p>Teachers</p></div>
  <div class="stat"><span data-target="8">0</span><p>Programs</p></div>
</div>

<!-- RECOMMENDED HIGHLIGHTS (HOME ONLY) -->
<h3 style="margin-top:40px">Recommended Highlights</h3>
<div class="cards">
  <div class="card">
    <h4>Achievements & Awards</h4>
    <p>Highlight recognitions of learners, teachers, and the school at district, division, and regional levels.</p>
  </div>
  <div class="card">
    <h4>School Hymn</h4>
    <p>Official school hymn lyrics for assemblies, programs, and ceremonies.</p>
  </div>
  <div class="card">
    <h4>Vision, Mission & Core Values</h4>
    <p>DepEd-aligned vision, mission, and values guiding the school community.</p>
  </div>
  <div class="card">
    <h4>Community Partnerships</h4>
    <p>Strong collaboration with parents, LGUs, NGOs, and stakeholders.</p>
  </div>
</div>

<!-- CAMPUS LIFE (HOME ONLY) -->
<h3 style="margin-top:40px">Campus Life</h3>
<div class="bottom-slider">
  <img src="https://via.placeholder.com/900x400?text=Campus+1" class="active">
  <img src="https://via.placeholder.com/900x400?text=Campus+2">
  <img src="https://via.placeholder.com/900x400?text=Campus+3">
</div>

<!-- CONTACT SECTION ON HOME PAGE -->
<h2>Contact Us</h2>
<p>We are happy to assist students, parents, and stakeholders. You may reach us through the following official channels.</p>
<div class="cards">
<!-- Telephone link (clickable) -->
<p><strong>Telephone Contact:</strong> <a href="tel:+639123456789">+63 912 345 6789</a></p>
<!-- Plain text phone number (non-clickable) -->
<p><strong>Phone Number:</strong> 09916581805</p>
<p><strong>Email:</strong> <a href="mailto:501518@deped.gov.ph">501518@deped.gov.ph</a></p>
<p><strong>Facebook:</strong> <a href="https://www.facebook.com/SAPANGMARAGULIS501518" target="_blank">School Page</a></p>
<p><strong>Address:</strong> Espinosa Street, Sitio Centro, Sapang Maragul, Tarlac City</p>
<div class="card">
  <h3>üìç School Location</h3>
  <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d587.4034048435935!2d120.54898813469448!3d15.503637171811675!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3396c7e0ecab505d%3A0xcdcb1ec71c6158ac!2sSapang%20Maragul%20Integrated%20School!5e1!3m2!1sen!2sph!4v1765892934782!5m2!1sen!2sph" width="100%" height="280" style="border:0;border-radius:16px" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
  <p style="margin-top:10px">
  <a href="https://www.waze.com/ul?q=Sapang%20Maragul%20Integrated%20School" target="_blank">üìç Open in Waze</a> |
    <a href="https://maps.google.com" target="_blank">üó∫Ô∏è Open in Google Maps</a>
  </p>
</div>
</div>

<!-- Button to redirect to Comments tab -->
<div style="text-align:center;margin-top:40px;margin-bottom:20px;">
  <button onclick="document.querySelector('[data-tab=\'comments\']').click();" style="padding:12px 24px;background:linear-gradient(135deg,#4f46e5,#2563eb);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:background 0.3s;">
    Leave a Message
  </button>
</div>

</div>





<!-- ================= HYMN ================= -->
<div id="hymn" class="tab-content">
<h2>School Hymn</h2>
<div class="card">
<p><strong>Sapang Maragul Integrated School Hymn</strong></p>
<p>Lyrics of the school hymn can be placed here.<br>
This section may include an audio player in the future.</p>
</div>
</div>



<!-- ================= PARTNERSHIPS ================= -->
<div id="partnerships" class="tab-content">
<h2>Community & Stakeholder Partnerships</h2>
<div class="cards">
  <div class="card"><h3>PTA</h3><p>Strong collaboration with parents and guardians.</p></div>
  <div class="card"><h3>Local Government Unit</h3><p>Support from barangay and municipal offices.</p></div>
  <div class="card"><h3>Stakeholders</h3><p>NGOs and partners supporting school programs.</p></div>
</div>
</div>

<!-- ================= FACULTY ================= -->
<div id="faculty" class="tab-content">
<a href="https://via.placeholder.com/1x1?text=PDF" download class="card" style="display:inline-block;margin-bottom:30px;text-decoration:none;color:#333">
  üìÑ Download Faculty & Staff Directory (PDF)
</a>
<h2>Faculty & Staff</h2>
<p>Our teachers are grouped according to department to ensure focused and quality instruction.</p>

<h3>Elementary Department</h3>
<div class="cards">
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0447.JPG" style="width:100%;border-radius:18px">
    <span class="badge"></span>
    <h3>BALIBAT, NEMAR M.</h3><p>Teacher III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0442.JPG" style="width:100%;border-radius:18px">
    <span class="badge"></span>
    <h3>BALIBAR, ROWENA D.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0385.JPG" style="width:100%;border-radius:18px">
    <h3>BRAVO, MARCELINA N.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0471.JPG" style="width:100%;border-radius:18px">
    <h3>CARPIO, JANNETTE T.</h3><p>TEACHER II</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0434.JPG" style="width:100%;border-radius:18px">
    <h3>CASILAN, FERMINA E.</h3><p>MASTER TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0438.JPG" style="width:100%;border-radius:18px">
    <h3>DAYAN, ESTRELLA T.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0380.JPG" style="width:100%;border-radius:18px">
    <h3>DELA CRUZ, IRENE A.</h3><p>TEACHER II</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0409.JPG" style="width:100%;border-radius:18px">
    <h3>ESPINOSA, MARIVEL L.</h3><p>TEACHER II</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="c:\Users\Admin\Downloads\27f038dd-6ed7-4df8-a5e1-9e11e5886d4e.jpg" style="width:100%;border-radius:18px">
    <h3>ESPINOSA, ROSALINA D.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0405.JPG" style="width:100%;border-radius:18px">
    <h3>ESPINOSA, SHIERLY I.</h3><p>TEACHER II</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0401.JPG" style="width:100%;border-radius:18px">
    <h3>JUAN, MARIA R.</h3><p>TEACHER III</p><p><strong>Years of service</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0418.JPG" style="width:100%;border-radius:18px">
    <h3>LANSANGAN, JESSICA S.</h3><p>MASTER TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0450.JPG" style="width:100%;border-radius:18px">
    <h3>LUANZON, KIMBERLY B.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0388.JPG" style="width:100%;border-radius:18px">
    <h3>LUNDANG, ELSIE Y.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0421.JPG"style="width:100%;border-radius:18px">
    <h3>MANALO, ANGELA E.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0413.JPG" style="width:100%;border-radius:18px">
    <h3>MEDINA, ROSE L.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0525.JPG" style="width:100%;border-radius:18px">
    <h3>PABLO, RUTH C.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
</div>
<div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0431.JPG" style="width:100%;border-radius:18px">
    <h3>PINEDA, IVY JEAN B.</h3><p>TEACHER II</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0397.JPG" style="width:100%;border-radius:18px">
    <h3>REANZARES, JOSEPHINE E.</h3><p>MASTER TEACHER II</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0393.JPG" style="width:100%;border-radius:18px">
    <h3>TABAMO, LLOYD VINCENT J.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="c:\Users\Admin\Downloads\ad6c51a7-760b-4e07-995d-4ff643e9736d.jpg" style="width:100%;border-radius:18px">
    <h3>TAGUINES, FERNAN D.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0427.JPG" style="width:100%;border-radius:18px">
    <h3>TIBURCIO, SHIELA MARIE F.</h3><p>TEACHER VI</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0490.JPG" style="width:100%;border-radius:18px">
    <h3>TOMAS, MARK ANTHONY G.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0378.JPG" style="width:100%;border-radius:18px">
    <h3>VALETE, JEFFREY C.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
</div>

<h3 style="margin-top:50px">Junior High School Department</h3>
<div class="cards">
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0458.JPG" style="width:100%;border-radius:18px">
    <span class="badge"></span>
    <h3>AMPARO, MARIBEL B.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0463.JPG" style="width:100%;border-radius:18px">
    <h3>GARCIA, JOANA PAULINE B.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0503.JPG" style="width:100%;border-radius:18px">
    <h3>GRANDE, CAROL C.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0482.JPG" style="width:100%;border-radius:18px">
    <h3>DERIJE, JOANNA MARIE P.</h3><p>TEACHER IV</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0455.JPG" style="width:100%;border-radius:18px">
    <h3>QUINTOS, KATHLEEN S.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0529 (1).JPG" style="width:100%;border-radius:18px">
    <h3>RAMOS, ERIC T.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0499.JPG" style="width:100%;border-radius:18px">
    <h3>SABADO, ROSELYN A.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0467.JPG" style="width:100%;border-radius:18px">
    <h3>SAMSON, MARY ROSE C.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
    </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0486.JPG" style="width:100%;border-radius:18px">
    <h3>SAPLAN, MARIA PRECIOUS CHRISTINE D.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0537.JPG" style="width:100%;border-radius:18px">
    <h3>SEVILLA, EDDIE LYNNE P.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0516.JPG" style="width:100%;border-radius:18px">
    <h3>TUMALE, EDWARD A.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0478.JPG" style="width:100%;border-radius:18px">
    <h3>TEOFILO, MICHELLE L.</h3><p>TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0512.JPG" style="width:100%;border-radius:18px">
    <h3>TORRES, LOVELY JOY L.</h3><p>TEACHER IV</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0507.JPG" style="width:100%;border-radius:18px">
    <h3>VALDEZ, NORHYNN B.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
    </div>
  <div class="card">
    <img src="c:\Users\Admin\Downloads\63c18f50-55fc-456f-bb69-4f6d4a13e67c.jpg" style="width:100%;border-radius:18px">
    <h3>WAGE, ABEGAIL G.</h3><p>TEACHER I</p><p><strong>Years of Service:</strong></p>
  </div>
</div>

<h3 style="margin-top:50px">Non-Teaching Personnel</h3>
<p>Our non-teaching staff play an important role in supporting school operations and learner services.</p>
<div class="cards">
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0542.JPG" style="width:100%;border-radius:18px">
    <h3>FELICITO, SALAS C.</h3><p>HEAD TEACHER III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="https://via.placeholder.com/250?text=Registrar" style="width:100%;border-radius:18px">
    <h3>LANSANGAN, CRISTY R.</h3><p>ADMINISTRATIVE OFFICER II</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0517.JPG" style="width:100%;border-radius:18px">
    <h3>ULEP, PATRICIA MAE E.</h3><p>ADMINISTRATIVE ASSISTANT III</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0533.JPG" style="width:100%;border-radius:18px">
    <h3>ANDULANA, EVAN C.</h3><p>J.O</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0522.JPG" style="width:100%;border-radius:18px">
    <h3>BUCU, ROLANDO D.</h3><p>J.O</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0547.JPG" style="width:100%;border-radius:18px">
    <h3>DAYAN, ELMER T.</h3><p>J.O</p><p><strong>Years of Service:</strong></p>
  </div>
  <div class="card">
    <img src="C:\Users\Admin\Downloads\DSC_0495 (1).JPG" style="width:100%;border-radius:18px">
    <h3>SILVESTRE, ANNA MARIE R.</h3><p>J.O</p><p><strong>Years of Service:</strong></p>
  </div>
</div>
</div>
</div>

<!-- ================= ADMISSION ================= -->
<div id="admission" class="tab-content">
<h2>Enrollment</h2>
<a href="https://via.placeholder.com/1x1?text=PDF" download>Download Enrollment Form</a>

</div>

<!-- ================= NEWS ================= -->
<div id="news" class="tab-content">
<h2>News & Announcements</h2>
<div id="news-display">
  <!-- News will be displayed here -->
</div>

<hr style="border:none;height:1px;background:#e5e7eb;margin:60px 0">

<h2>Achievements & Awards</h2>
<div class="cards">
  <div class="card"><h3>Academic Excellence</h3><p>Division and district academic competition awards.</p></div>
  <div class="card"><h3>Student Recognition</h3><p>Outstanding learners in academics, sports, and leadership.</p></div>
  <div class="card"><h3>Teacher Achievements</h3><p>Recognitions received by teachers and staff.</p></div>
</div>
<div id="news-form" style="display:none;margin-top:30px;">
  <h3>Add/Edit News</h3>
  <form id="news-add-form" style="margin-top:20px;">
    <div style="margin-bottom:15px;">
      <label for="news-title">Title</label><br>
      <input type="text" id="news-title" name="title" required style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-type">Post Type:</label><br>
      <select id="news-type" name="type" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
        <option value="photo">Photo Post</option>
        <option value="album">Album Post</option>
        <option value="video">Video Post</option>
      </select>
    </div>
    <div id="photo-editor" style="margin-bottom:15px;">
      <label>Design Your Content (Canvas Editor):</label><br>
      <div style="border:1px solid #ccc;border-radius:4px;padding:10px;background:#f9f9f9;">
        <div style="margin-bottom:10px;">
          <button type="button" id="add-text-btn" style="padding:5px 10px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:10px;">Add Text</button>
          <button type="button" id="add-image-btn" style="padding:5px 10px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:10px;">Add Image</button>
          <button type="button" id="clear-canvas-btn" style="padding:5px 10px;background:#dc2626;color:#fff;border:none;border-radius:4px;cursor:pointer;">Clear Canvas</button>
        </div>
        <canvas id="news-canvas" width="1000" height="700" style="border:1px solid #ddd;"></canvas>
      </div>
    </div>
    <div id="album-editor" style="margin-bottom:15px;display:none;">
      <label>Album Photos:</label><br>
      <div style="border:1px solid #ccc;border-radius:4px;padding:10px;background:#f9f9f9;">
        <div style="margin-bottom:10px;">
          <button type="button" id="add-album-image-btn" style="padding:5px 10px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:10px;">Add Photo</button>
          <button type="button" id="delete-selected-photo-btn" style="padding:5px 10px;background:#dc2626;color:#fff;border:none;border-radius:4px;cursor:pointer;">Delete Selected Photo</button>
        </div>
        <div id="album-container" style="position:relative;display:flex;align-items:center;justify-content:center;width:1000px;height:700px;border:1px solid #ddd;background:#fff;">
          <button id="album-prev" style="position:absolute;left:10px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:40px;height:40px;font-size:20px;cursor:pointer;z-index:10;">&#10094;</button>
          <img id="album-current-img" src="" alt="Album Image" style="max-width:100%;max-height:100%;display:none;">
          <button id="album-next" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:40px;height:40px;font-size:20px;cursor:pointer;z-index:10;">&#10095;</button>
        </div>
        <div id="album-thumbnails" style="margin-top:10px;display:flex;gap:5px;overflow-x:auto;"></div>
      </div>
    </div>
    <div id="video-editor" style="display:none;margin-bottom:15px;">
      <label for="news-video-url">Video URL:</label><br>
      <input type="url" id="news-video-url" placeholder="Enter video URL (e.g., https://example.com/video.mp4)" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-text">Additional Text Content:</label><br>
      <div id="news-editor" style="height: 200px;"></div>
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-hashtags">Hashtags (comma-separated):</label><br>
      <input type="text" id="news-hashtags" name="hashtags" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-credit">Credit:</label><br>
      <input type="text" id="news-credit" name="credit" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-text-color">Text Color:</label><br>
      <input type="color" id="news-text-color" name="textColor" value="#000000" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-category">Category:</label><br>
      <select id="news-category" name="category" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
        <option value="Announcement">Announcement</option>
        <option value="Event">Event</option>
        <option value="Achievement">Achievement</option>
        <option value="Other">Other</option>
      </select>
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-style">Layout Style:</label><br>
      <select id="news-style" name="style" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
        <option value="left-right">Photo Left, Text Right</option>
        <option value="center-bottom">Photo Top, Text Center Bottom</option>
      </select>
    </div>
    <div style="margin-bottom:15px;">
      <label for="news-photo-width">Photo Width (px, default 500):</label><br>
      <input type="number" id="news-photo-width" name="photoWidth" min="500" max="1000" value="500" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label>
        <input type="checkbox" id="news-visible" name="visible" checked> Visible (uncheck to hide the post)
      </label>
    </div>
    <button type="button" id="preview-news" style="padding:10px 20px;background:#10b981;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:10px;">Preview</button>
    <button type="submit" style="padding:10px 20px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;">Save News</button>
    <button type="button" id="cancel-news" style="padding:10px 20px;background:#ccc;color:#000;border:none;border-radius:4px;cursor:pointer;margin-left:10px;">Cancel</button>
  </form>
</div>
</div>

<!-- ================= COMMENTS ================= -->
<div id="comments" class="tab-content">
<h2>Comments & Feedback</h2>
<p>We value your feedback! Leave a comment below and rate your experience.</p>
<form id="comment-form" style="margin-top:20px;">
  <div style="margin-bottom:15px;">
    <label for="name">Name:</label><br>
    <input type="text" id="name" name="name" required style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
  </div>
  <div style="margin-bottom:15px;">
    <label for="email">Email:</label><br>
    <input type="email" id="email" name="email" required style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
  </div>
  <div style="margin-bottom:15px;">
    <label>Rating:</label><br>
    <div id="rating-stars" style="font-size:24px;">
      <span class="star" data-value="1">‚òÜ</span>
      <span class="star" data-value="2">‚òÜ</span>
      <span class="star" data-value="3">‚òÜ</span>
      <span class="star" data-value="4">‚òÜ</span>
      <span class="star" data-value="5">‚òÜ</span>
    </div>
    <input type="hidden" id="rating" name="rating" value="0">
  </div>
  <div style="margin-bottom:15px;">
    <label for="comment">Comment:</label><br>
    <textarea id="comment" name="comment" rows="4" required style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;"></textarea>
  </div>
  <button type="submit" style="padding:10px 20px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;">Submit Comment</button>
</form>

<div id="comments-display" style="margin-top:30px;">
  <h4>Recent Comments</h4>
</div>
</div>





<footer>
  <p>¬© 2025 Sapang Maragul Integrated School. All rights reserved.</p>
  <p style="font-size:14px;max-width:900px;margin:10px auto">
    All content on this website including text, images, logos, and documents is the property of Sapang Maragul Integrated School unless otherwise stated. Unauthorized use, reproduction, or distribution is prohibited.
  </p>
</footer>

<!-- ================= JS (UNTOUCHED) ================= -->
<script>
/* TAB */
const buttons=document.querySelectorAll('.tab-button:not(.dropdown-toggle)');
const dropdownToggles=document.querySelectorAll('.dropdown-toggle');
const tabs=document.querySelectorAll('.tab-content');
const header = document.getElementById('main-header');
// Show header on initial load if home is active
if(document.getElementById('home').classList.contains('active')){
  header.classList.add('home-visible');
}
buttons.forEach(b=>b.onclick=()=>{
  buttons.forEach(x=>x.classList.remove('active'));
  dropdownToggles.forEach(x=>x.classList.remove('active'));
  tabs.forEach(t=>t.classList.remove('active'));
  b.classList.add('active');
  // If submenu, also activate the parent dropdown toggle
  if(b.classList.contains('submenu')){
    const parentDropdown=b.closest('.dropdown');
    if(parentDropdown){
      parentDropdown.querySelector('.dropdown-toggle').classList.add('active');
    }
  }
  document.getElementById(b.dataset.tab).classList.add('active');
  // Show header only on home tab
  if(b.dataset.tab === 'home'){
    header.classList.add('home-visible');
  } else {
    header.classList.remove('home-visible');
  }
  // Hide footer on admission tab
  if(b.dataset.tab === 'admission'){
    document.querySelector('footer').classList.add('footer-hidden');
  } else {
    document.querySelector('footer').classList.remove('footer-hidden');
  }
  window.scrollTo({top:0,behavior:'smooth'});
});



/* HEADER SLIDER + DOTS */
const slides = document.querySelectorAll('.header-slide');
const dots = document.querySelector('.dots');
let i = 0;
slides.forEach((_, idx) => {
  const d = document.createElement('span');
  d.className = 'dot' + (idx === 0 ? ' active' : '');
  d.onclick = () => show(idx);
  dots.appendChild(d);
});
function show(n) {
  slides[i].classList.remove('active');
  dots.children[i].classList.remove('active');
  i = n;
  slides[i].classList.add('active');
  dots.children[i].classList.add('active');
}
function prevSlide() {
  show((i - 1 + slides.length) % slides.length);
}
function nextSlide() {
  show((i + 1) % slides.length);
}
setInterval(() => show((i + 1) % slides.length), 5000);

/* DOT STYLES */
const style = document.createElement('style');
style.textContent = `
.dot { cursor:pointer; margin:0 5px; opacity:0.5; width:12px; height:12px; background:#fff; border-radius:50%; display:inline-block; transition:opacity 0.3s; }
.dot.active { opacity:1; }
`;
document.head.appendChild(style);

/* BOTTOM SLIDER */
const bSlides=document.querySelectorAll('.bottom-slider img');let bi=0;setInterval(()=>{bSlides[bi].classList.remove('active');bi=(bi+1)%bSlides.length;bSlides[bi].classList.add('active')},5000);

/* STATS ‚Äì FIXED & SAFE */
function animateStats(){
  const stats=document.querySelectorAll('.stat span[data-target]');
  stats.forEach(el=>{
    el.textContent='0';
    const target=parseInt(el.getAttribute('data-target'),10);
    let current=0;
    const increment=Math.max(1,Math.floor(target/120));
    function update(){
      current+=increment;
      if(current>=target){
        el.textContent=target;
      }else{
        el.textContent=current;
        requestAnimationFrame(update);
      }
    }
    update();
  });
}

/* run stats only when visible */
const statsSection=document.querySelector('.stats');
if(statsSection){
  const observer=new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        animateStats();
        observer.disconnect();
      }
    });
  },{threshold:0.3});
  observer.observe(statsSection);
}



/* REVEAL */
const rev=document.querySelectorAll('.reveal');
const reveal=()=>rev.forEach(r=>{
  if(r.getBoundingClientRect().top<innerHeight-100)r.classList.add('active');
});
addEventListener('scroll',reveal);
reveal();

/* COMMENT FORM */
let comments = JSON.parse(localStorage.getItem('comments')) || [
  { name: 'John Doe', email: 'john@example.com', rating: 5, comment: 'Great school! My child is thriving here.', date: '2025-12-18' },
  { name: 'Jane Smith', email: 'jane@example.com', rating: 4, comment: 'Excellent faculty and facilities.', date: '2025-12-17' }
];
let isAdmin = false;

function displayComments() {
  const display = document.getElementById('comments-display');
  display.innerHTML = '<h4>Recent Comments</h4>';
  if (isAdmin) {
    display.innerHTML += '<button id="exit-admin" style="margin-bottom:10px;padding:5px 10px;background:#666;color:#fff;border:none;border-radius:4px;cursor:pointer;">Exit Admin Mode</button>';
  } else {
    display.innerHTML += '<button id="enter-admin" style="margin-bottom:10px;padding:5px 10px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;">Admin Login</button>';
  }
  comments.forEach((c, index) => {
    const commentDiv = document.createElement('div');
    commentDiv.className = 'comment';
    commentDiv.style.border = '1px solid #e5e7eb';
    commentDiv.style.padding = '15px';
    commentDiv.style.marginBottom = '10px';
    commentDiv.style.borderRadius = '8px';
    let replyHtml = '';
    if (c.reply) {
      replyHtml = `<div style="margin-top:10px;padding:10px;background:#f3f4f6;border-left:4px solid #4f46e5;"><strong>Admin Reply:</strong> ${c.reply}</div>`;
    }
    commentDiv.innerHTML = `
      <strong>${c.name}</strong> <em>(${c.email})</em>
      <div style="color:#f59e0b;">${'‚òÖ'.repeat(c.rating)}${'‚òÜ'.repeat(5-c.rating)}</div>
      <small>${new Date(c.date).toLocaleDateString()}</small><br>
      <p>${c.comment}</p>
      ${replyHtml}
      ${isAdmin ? `<button onclick="deleteComment(${index})" style="background:#dc2626;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin-right:5px;">Delete</button>` : ''}
      ${isAdmin ? `<button onclick="replyToComment(${index})" style="background:#10b981;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;">Reply</button>` : ''}
    `;
    display.appendChild(commentDiv);
  });
}

function deleteComment(index) {
  if (confirm('Are you sure you want to delete this comment?')) {
    comments.splice(index, 1);
    localStorage.setItem('comments', JSON.stringify(comments));
    displayComments();
  }
}

function replyToComment(index) {
  const reply = prompt('Enter your reply:');
  if (reply) {
    comments[index].reply = reply;
    localStorage.setItem('comments', JSON.stringify(comments));
    displayComments();
    
    // Send email using EmailJS
    emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', {
      to_email: comments[index].email,
      from_name: 'Sapang Maragul Integrated School Admin',
      to_name: comments[index].name,
      original_comment: comments[index].comment,
      admin_reply: reply
    }).then(function(response) {
      alert('Reply sent successfully!');
    }, function(error) {
      alert('Failed to send reply: ' + error.text);
    });
  }
}

// Admin login
async function hashPassword(password) {
  const encoder = new TextEncoder();
  const data = encoder.encode(password);
  const hashBuffer = await crypto.subtle.digest('SHA-256', data);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}

document.addEventListener('click', async function(e) {
  if (e.target.id === 'enter-admin') {
    const password = prompt('Enter admin password:');
    const hashedInput = await hashPassword(password);
    const correctHash = '21c26d8753270526c6fbce145a49f03cbf81bbb20fe37a72d5ae92789d9c4d08'; // SHA-256 hash of 'SMIS501518'
    if (hashedInput === correctHash) {
      isAdmin = true;
      displayComments();
    } else {
      alert('Incorrect password');
    }
  } else if (e.target.id === 'exit-admin') {
    isAdmin = false;
    displayComments();
  }
});

// Star rating
document.querySelectorAll('.star').forEach(star => {
  star.addEventListener('click', function() {
    const value = this.getAttribute('data-value');
    document.getElementById('rating').value = value;
    document.querySelectorAll('.star').forEach(s => {
      s.textContent = '‚òÜ';
      s.classList.remove('active');
    });
    for (let i = 0; i < value; i++) {
      document.querySelectorAll('.star')[i].textContent = '‚òÖ';
      document.querySelectorAll('.star')[i].classList.add('active');
    }
  });
});

document.getElementById('comment-form').addEventListener('submit', function(e) {
  e.preventDefault();
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const rating = document.getElementById('rating').value;
  const comment = document.getElementById('comment').value;
  const date = new Date().toISOString().split('T')[0];
  
  if (rating == 0) {
    alert('Please select a rating.');
    return;
  }
  
  comments.unshift({ name, email, rating: parseInt(rating), comment, date });
  localStorage.setItem('comments', JSON.stringify(comments));
  displayComments();
  
  // Clear form
  document.getElementById('comment-form').reset();
  document.querySelectorAll('.star').forEach(s => s.textContent = '‚òÜ');
  document.getElementById('rating').value = '0';
  alert('Thank you for your comment!');
});

// Load comments on page load
displayComments();

/* NEWS MANAGEMENT */
let news = JSON.parse(localStorage.getItem('news')) || [];
let isNewsAdmin = false;
let editingNewsIndex = -1;
let quill;
let albumImages = [];
let currentAlbumIndex = 0;

function displayNews() {
  const display = document.getElementById('news-display');
  display.innerHTML = '<h4>Recent News</h4>';
  if (isNewsAdmin) {
    display.innerHTML += '<button id="add-news" style="margin-bottom:10px;padding:5px 10px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;">Add News</button>';
    display.innerHTML += '<button id="exit-news-admin" style="margin-bottom:10px;padding:5px 10px;background:#666;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-left:10px;">Exit Admin Mode</button>';
  } else {
    display.innerHTML += '<button id="enter-news-admin" style="margin-bottom:10px;padding:5px 10px;background:#4f46e5;color:#fff;border:none;border-radius:4px;cursor:pointer;">Admin Login</button>';
  }
  news.forEach((n, index) => {
    if (!isNewsAdmin && n.visible === false) return; // Skip hidden posts for non-admins
    const newsDiv = document.createElement('div');
    newsDiv.className = 'news-item' + (n.style === 'center-bottom' ? ' center-bottom' : '');
    const photoWidth = n.photoWidth || 350;
    let mediaElement;
    if (n.type === 'video') {
      mediaElement = `<video controls style="width: ${photoWidth}px;"><source src="${n.videoUrl}" type="video/mp4">Your browser does not support the video tag.</video>`;
    } else if (n.type === 'album' && n.albumData && n.albumData.images && n.albumData.images.length > 0) {
      const albumId = `album-${index}`;
      mediaElement = `
        <div style="position:relative;display:inline-block;">
          <img id="${albumId}-img" src="${n.albumData.images[n.albumData.currentIndex || 0]}" alt="Album Photo" style="width: ${photoWidth}px;">
          <button onclick="changeAlbumImage(${index}, -1)" style="position:absolute;left:5px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:30px;height:30px;font-size:16px;cursor:pointer;">&#10094;</button>
          <button onclick="changeAlbumImage(${index}, 1)" style="position:absolute;right:5px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:30px;height:30px;font-size:16px;cursor:pointer;">&#10095;</button>
        </div>
      `;
    } else {
      mediaElement = `<img src="${n.photo}" alt="News Photo" style="width: ${photoWidth}px;">`;
    }
    newsDiv.innerHTML = `
      ${mediaElement}
      <div class="content">
        <h3>${n.title}</h3>
        <div class="date">${new Date(n.date).toLocaleDateString()} - ${n.category || 'Other'}</div>
        <div style="color: ${n.textColor};">${n.text}</div>
        ${n.hashtags ? `<div class="hashtags">${n.hashtags}</div>` : ''}
        ${n.credit ? `<div class="credit">${n.credit}</div>` : ''}
        ${isNewsAdmin ? `<button onclick="editNews(${index})" style="background:#f59e0b;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin-right:5px;">Edit</button>` : ''}
        ${isNewsAdmin ? `<button onclick="toggleVisibility(${index})" style="background:${n.visible !== false ? '#10b981' : '#f59e0b'};color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin-right:5px;">${n.visible !== false ? 'Hide' : 'Unhide'}</button>` : ''}
        ${isNewsAdmin ? `<button onclick="deleteNews(${index})" style="background:#dc2626;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;">Delete</button>` : ''}
      </div>
    `;
    display.appendChild(newsDiv);
  });
}

function resizeImage(index, newWidth) {
  const img = document.getElementById(`news-img-${index}`);
  if (img) {
    img.style.width = newWidth + 'px';
  }
}

function deleteNews(index) {
  if (confirm('Are you sure you want to delete this news?')) {
    news.splice(index, 1);
    localStorage.setItem('news', JSON.stringify(news));
    displayNews();
  }
}

function editNews(index) {
  editingNewsIndex = index;
  const n = news[index];
  document.getElementById('news-title').value = n.title;
  document.getElementById('news-type').value = n.type || 'photo';
  toggleEditors(n.type || 'photo');
  quill.root.innerHTML = n.text;
  document.getElementById('news-hashtags').value = n.hashtags || '';
  document.getElementById('news-credit').value = n.credit || '';
  document.getElementById('news-text-color').value = n.textColor || '#000000';
  document.getElementById('news-category').value = n.category || 'Other';
  document.getElementById('news-style').value = n.style || 'left-right';
  document.getElementById('news-visible').checked = n.visible !== false;
  if (n.type === 'video') {
    document.getElementById('news-video-url').value = n.videoUrl || '';
  } else if (n.type === 'album') {
    albumImages = n.albumData ? n.albumData.images || [] : [];
    currentAlbumIndex = n.albumData ? n.albumData.currentIndex || 0 : 0;
    updateAlbumDisplay();
  } else {
    // Load canvas content if available
    if (n.canvasData) {
      canvas.loadFromJSON(n.canvasData, canvas.renderAll.bind(canvas));
    } else {
      canvas.clear();
    }
  }
  // Note: Photo editing not handled for simplicity, as file input can't be pre-filled
  document.getElementById('news-form').style.display = 'block';
  document.getElementById('news-display').style.display = 'none';
}

document.addEventListener('click', async function(e) {
  if (e.target.id === 'enter-news-admin') {
    const password = prompt('Enter admin password:');
    const hashedInput = await hashPassword(password);
    const correctHash = '21c26d8753270526c6fbce145a49f03cbf81bbb20fe37a72d5ae92789d9c4d08'; // SHA-256 hash of 'SMIS501518'
    if (hashedInput === correctHash) {
      isNewsAdmin = true;
      displayNews();
    } else {
      alert('Incorrect password');
    }
  } else if (e.target.id === 'exit-news-admin') {
    isNewsAdmin = false;
    editingNewsIndex = -1;
    document.getElementById('news-form').style.display = 'none';
    document.getElementById('news-display').style.display = 'block';
    displayNews();
  } else if (e.target.id === 'add-news') {
    editingNewsIndex = -1;
    document.getElementById('news-add-form').reset();
    document.getElementById('news-type').value = 'photo';
    toggleEditors('photo');
    document.getElementById('news-category').value = 'Announcement';
    document.getElementById('news-style').value = 'left-right';
    document.getElementById('news-visible').checked = true;
    if (quill) quill.setContents([]);
    if (canvas) canvas.clear();
    albumImages = [];
    currentAlbumIndex = 0;
    updateAlbumDisplay();
    document.getElementById('news-form').style.display = 'block';
    document.getElementById('news-display').style.display = 'none';
  } else if (e.target.id === 'cancel-news') {
    document.getElementById('news-form').style.display = 'none';
    document.getElementById('news-display').style.display = 'block';
    editingNewsIndex = -1;
  }
});

document.getElementById('news-add-form').addEventListener('submit', function(e) {
  e.preventDefault();
  const title = document.getElementById('news-title').value;
  const type = document.getElementById('news-type').value;
  const text = quill.root.innerHTML;
  const hashtags = document.getElementById('news-hashtags').value;
  const credit = document.getElementById('news-credit').value;
  const textColor = document.getElementById('news-text-color').value;
  const category = document.getElementById('news-category').value;
  const style = document.getElementById('news-style').value;
  const visible = document.getElementById('news-visible').checked;
  const photoWidth = parseInt(document.getElementById('news-photo-width').value) || 300;
  const canvasData = canvas.toJSON();
  const photo = canvas.toDataURL();
  const videoUrl = document.getElementById('news-video-url').value;
  saveNews(title, text, hashtags, credit, textColor, category, style, visible, photoWidth, photo, canvasData, type, videoUrl);
});

// Preview functionality
document.getElementById('preview-news').addEventListener('click', function() {
  const title = document.getElementById('news-title').value;
  const type = document.getElementById('news-type').value;
  const text = quill.root.innerHTML;
  const hashtags = document.getElementById('news-hashtags').value;
  const credit = document.getElementById('news-credit').value;
  const textColor = document.getElementById('news-text-color').value;
  const category = document.getElementById('news-category').value;
  const style = document.getElementById('news-style').value;
  const visible = document.getElementById('news-visible').checked;
  const photoWidth = parseInt(document.getElementById('news-photo-width').value) || 300;
  const photo = canvas.toDataURL();
  const videoUrl = document.getElementById('news-video-url').value;

  // Create preview modal
  const previewModal = document.createElement('div');
  previewModal.id = 'preview-modal';
  previewModal.style.position = 'fixed';
  previewModal.style.top = '0';
  previewModal.style.left = '0';
  previewModal.style.width = '100%';
  previewModal.style.height = '100%';
  previewModal.style.background = 'rgba(0,0,0,0.8)';
  previewModal.style.display = 'flex';
  previewModal.style.alignItems = 'center';
  previewModal.style.justifyContent = 'center';
  previewModal.style.zIndex = '10000';

  const previewContent = document.createElement('div');
  previewContent.style.background = '#fff';
  previewContent.style.padding = '20px';
  previewContent.style.borderRadius = '10px';
  previewContent.style.maxWidth = '800px';
  previewContent.style.maxHeight = '80%';
  previewContent.style.overflowY = 'auto';

  const closeBtn = document.createElement('button');
  closeBtn.textContent = 'Close Preview';
  closeBtn.style.padding = '10px 20px';
  closeBtn.style.background = '#dc2626';
  closeBtn.style.color = '#fff';
  closeBtn.style.border = 'none';
  closeBtn.style.borderRadius = '4px';
  closeBtn.style.cursor = 'pointer';
  closeBtn.style.marginBottom = '20px';
  closeBtn.onclick = () => document.body.removeChild(previewModal);

  const previewItem = document.createElement('div');
  previewItem.className = 'news-item' + (style === 'center-bottom' ? ' center-bottom' : '');
  let mediaElement;
  if (type === 'video') {
    mediaElement = `<video controls style="width: ${photoWidth}px;"><source src="${videoUrl}" type="video/mp4">Your browser does not support the video tag.</video>`;
  } else if (type === 'album' && albumImages.length > 0) {
    mediaElement = `
      <div style="position:relative;display:inline-block;">
        <img id="preview-album-img" src="${albumImages[currentAlbumIndex]}" alt="Album Photo" style="width: ${photoWidth}px;">
        <button onclick="changePreviewAlbum(-1)" style="position:absolute;left:5px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:30px;height:30px;font-size:16px;cursor:pointer;">&#10094;</button>
        <button onclick="changePreviewAlbum(1)" style="position:absolute;right:5px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:30px;height:30px;font-size:16px;cursor:pointer;">&#10095;</button>
      </div>
    `;
  } else {
    mediaElement = `<img src="${photo}" alt="News Photo" style="width: ${photoWidth}px;">`;
  }
  previewItem.innerHTML = `
    ${mediaElement}
    <div class="content">
      <h3>${title}</h3>
      <div class="date">${new Date().toLocaleDateString()} - ${category}</div>
      <div style="color: ${textColor};">${text}</div>
      ${hashtags ? `<div class="hashtags">${hashtags}</div>` : ''}
      ${credit ? `<div class="credit">${credit}</div>` : ''}
      ${!visible ? '<div style="color:#dc2626;font-weight:bold;">This post is hidden</div>' : ''}
    </div>
  `;

  previewContent.appendChild(closeBtn);
  previewContent.appendChild(previewItem);
  previewModal.appendChild(previewContent);
  document.body.appendChild(previewModal);
});

function saveNews(title, text, hashtags, credit, textColor, category, style, visible, photoWidth, photo, canvasData, type, videoUrl) {
  const date = new Date().toISOString().split('T')[0];
  const albumData = type === 'album' ? { images: albumImages, currentIndex: currentAlbumIndex } : null;
  if (editingNewsIndex >= 0) {
    news[editingNewsIndex] = { title, text, hashtags, credit, textColor, category, style, visible, photoWidth, photo, date, canvasData, type, videoUrl, albumData };
  } else {
    news.unshift({ title, text, hashtags, credit, textColor, category, style, visible, photoWidth, photo, date, canvasData, type, videoUrl, albumData });
  }
  localStorage.setItem('news', JSON.stringify(news));
  document.getElementById('news-form').style.display = 'none';
  document.getElementById('news-display').style.display = 'block';
  displayNews();
  editingNewsIndex = -1;
}

function toggleVisibility(index) {
  news[index].visible = !news[index].visible;
  localStorage.setItem('news', JSON.stringify(news));
  displayNews();
}

function changeAlbumImage(newsIndex, direction) {
  const n = news[newsIndex];
  if (n.albumData && n.albumData.images.length > 0) {
    let newIndex = (n.albumData.currentIndex + direction + n.albumData.images.length) % n.albumData.images.length;
    n.albumData.currentIndex = newIndex;
    const img = document.getElementById(`album-${newsIndex}-img`);
    if (img) {
      img.src = n.albumData.images[newIndex];
    }
    localStorage.setItem('news', JSON.stringify(news));
  }
}

function toggleEditors(type) {
  if (type === 'photo') {
    document.getElementById('photo-editor').style.display = 'block';
    document.getElementById('album-editor').style.display = 'none';
    document.getElementById('video-editor').style.display = 'none';
  } else if (type === 'album') {
    document.getElementById('photo-editor').style.display = 'none';
    document.getElementById('album-editor').style.display = 'block';
    document.getElementById('video-editor').style.display = 'none';
  } else {
    document.getElementById('photo-editor').style.display = 'none';
    document.getElementById('album-editor').style.display = 'none';
    document.getElementById('video-editor').style.display = 'block';
  }
}

document.getElementById('news-type').addEventListener('change', function() {
  toggleEditors(this.value);
});

// Load news on page load
displayNews();

// Initialize Quill editor
quill = new Quill('#news-editor', {
  theme: 'snow',
  modules: {
    toolbar: [
      [{ 'header': [1, 2, 3, false] }],
      ['bold', 'italic', 'underline', 'strike'],
      [{ 'list': 'ordered'}, { 'list': 'bullet' }],
      [{ 'color': [] }, { 'background': [] }],
      [{ 'align': [] }],
      ['link', 'image'],
      ['clean']
    ]
  }
});

// Initialize Fabric.js canvas
const canvas = new fabric.Canvas('news-canvas');

// Add text button
document.getElementById('add-text-btn').addEventListener('click', function() {
  const text = new fabric.IText('Edit this text', {
    left: 100,
    top: 100,
    fontSize: 20,
    fill: '#000'
  });
  canvas.add(text);
  canvas.setActiveObject(text);
});

// Add image button
document.getElementById('add-image-btn').addEventListener('click', function() {
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = 'image/*';
  input.onchange = function(e) {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = function(f) {
      fabric.Image.fromURL(f.target.result, function(img) {
        img.scaleToWidth(200);
        canvas.add(img);
        canvas.setActiveObject(img);
      });
    };
    reader.readAsDataURL(file);
  };
  input.click();
});

// Clear canvas button
document.getElementById('clear-canvas-btn').addEventListener('click', function() {
  if (confirm('Are you sure you want to clear all content from the canvas?')) {
    canvas.getObjects().forEach(obj => canvas.remove(obj));
    canvas.renderAll();
  }
});

// Album functions
function updateAlbumDisplay() {
  const img = document.getElementById('album-current-img');
  const thumbnails = document.getElementById('album-thumbnails');
  if (albumImages.length > 0) {
    img.src = albumImages[currentAlbumIndex];
    img.style.display = 'block';
  } else {
    img.style.display = 'none';
  }
  thumbnails.innerHTML = '';
  albumImages.forEach((src, index) => {
    const thumb = document.createElement('img');
    thumb.src = src;
    thumb.style.width = '60px';
    thumb.style.height = '60px';
    thumb.style.objectFit = 'cover';
    thumb.style.cursor = 'pointer';
    thumb.style.border = index === currentAlbumIndex ? '2px solid #4f46e5' : '1px solid #ccc';
    thumb.onclick = () => {
      currentAlbumIndex = index;
      updateAlbumDisplay();
    };
    thumbnails.appendChild(thumb);
  });
}

document.getElementById('add-album-image-btn').addEventListener('click', function() {
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = 'image/*';
  input.multiple = true;
  input.onchange = function(e) {
    Array.from(e.target.files).forEach(file => {
      const reader = new FileReader();
      reader.onload = function(f) {
        albumImages.push(f.target.result);
        if (albumImages.length === 1) currentAlbumIndex = 0;
        updateAlbumDisplay();
      };
      reader.readAsDataURL(file);
    });
  };
  input.click();
});

document.getElementById('delete-selected-photo-btn').addEventListener('click', function() {
  if (albumImages.length === 0) {
    alert('No photos to delete.');
    return;
  }
  if (confirm('Are you sure you want to delete the currently selected photo?')) {
    albumImages.splice(currentAlbumIndex, 1);
    if (albumImages.length === 0) {
      currentAlbumIndex = 0;
    } else if (currentAlbumIndex >= albumImages.length) {
      currentAlbumIndex = albumImages.length - 1;
    }
    updateAlbumDisplay();
  }
});

document.getElementById('album-prev').addEventListener('click', function() {
  if (albumImages.length > 0) {
    currentAlbumIndex = (currentAlbumIndex - 1 + albumImages.length) % albumImages.length;
    updateAlbumDisplay();
  }
});

document.getElementById('album-next').addEventListener('click', function() {
  if (albumImages.length > 0) {
    currentAlbumIndex = (currentAlbumIndex + 1) % albumImages.length;
    updateAlbumDisplay();
  }
});

</script>
</body>
</html>
